

/* web/openwebrx/ima_adpcm.min.js (web/openwebrx/ima_adpcm.js = Tue Sep 13 11:59:05 2022) */
var indexAdjustTable=[-1,-1,-1,-1,2,4,6,8,-1,-1,-1,-1,2,4,6,8];var stepSizeTable=[7,8,9,10,11,12,13,14,16,17,19,21,23,25,28,31,34,37,41,45,50,55,60,66,73,80,88,97,107,118,130,143,157,173,190,209,230,253,279,307,337,371,408,449,494,544,598,658,724,796,876,963,1060,1166,1282,1411,1552,1707,1878,2066,2272,2499,2749,3024,3327,3660,4026,4428,4871,5358,5894,6484,7132,7845,8630,9493,10442,11487,12635,13899,15289,16818,18500,20350,22385,24623,27086,29794,32767];function ImaAdpcmDecode(deltaCode,state){var step=stepSizeTable[state.index];var difference=step>>3;if(deltaCode&1)difference+=step>>2;if(deltaCode&2)difference+=step>>1;if(deltaCode&4)difference+=step;if(deltaCode&8)difference=-difference;state.previousValue+=difference;if(state.previousValue>state.pos_clamp)state.previousValue=state.pos_clamp;else if(state.previousValue<state.neg_clamp)state.previousValue=state.neg_clamp;state.index+=indexAdjustTable[deltaCode];if(state.index<0)state.index=0;else if(state.index>88)state.index=88;return state.previousValue;}
function decode_ima_adpcm_e8_i16(input,output,output_unsquelched,squelched,input_length,state){state.pos_clamp=+32767;state.neg_clamp=-32768;var i,k=0;for(i=0;i<input_length;i++){var byte=input.getUint8(i);output_unsquelched[k]=ImaAdpcmDecode(byte&0xf,state);output[k]=squelched?1:output_unsquelched[k];k++;output_unsquelched[k]=ImaAdpcmDecode((byte>>4)&0xf,state);output[k]=squelched?1:output_unsquelched[k];k++;}}
function decode_ima_adpcm_e8_u8(input,output,input_length,state){state.pos_clamp=255;state.neg_clamp=0;var i,k=0;for(i=0;i<input_length;i++){output[k++]=ImaAdpcmDecode(input[i]&0xf,state);output[k++]=ImaAdpcmDecode((input[i]>>4)&0xf,state);}}



