

/* web/extensions/timecode/rus.min.js (web/extensions/timecode/rus.js = Sat Feb 13 07:11:20 2021) */
var rus={AMPL_NOISE_THRESHOLD:5,arm:0,prev_zero_width:0,wait:0,cur:0,cnt:0,dat0:0,dat1:0,rcnt:0,tick:0,min:0,time0:0,time0_copy:0,line:0,dcnt:0,end:null};function rus_dmsg(t){w3_innerHTML("id-tc-rus",t)}function rus_legend(){0==(3&rus.line++)&&tc_dmsg("M 00 UUUUU 000 UUUUU 00 TTTTTT 0 yyyyyyyy mmmmm www dddddd hhhhhh mmmmmmm <br>")}function rus_ampl_decode(t){var c=tc_bcd(t,59,7,-1)%60,d=tc_bcd(t,52,6,-1),r=tc_bcd(t,46,6,-1),n=tc_bcd(t,37,5,-1)-1,t=tc_bcd(t,32,8,-1)+2e3,c=r+" "+tc.mo[n]+" "+t+" "+d.leadingZeros(2)+":"+c.leadingZeros(2)+" MSK";tc_dmsg("  "+c+"<br>"),tc_stat("lime","Time decoded: "+c)}function rus_clr(){var t=rus;t.arm=0,t.cnt=t.rcnt=t.dcnt=0,t.prev_zero_width=t.one_width=t.zero_width=0,t.line=0}function rus_ampl(t){var c=rus;tc.trig++,100<=tc.trig&&(tc.trig=0),t=.95<t?1:0,tc.ref||(tc.data=t,tc.ref=1),c.wait-=10,t==c.cur?c.cnt=0:(c.cnt++,c.cnt>c.AMPL_NOISE_THRESHOLD&&(c.cur=t,c.cnt=0,tc.data^=1,tc.data?c.dat0=Math.round(c.zero_width/10):c.dat1=Math.round(c.one_width/10),tc.data&&(tc.state==tc.ACQ_SYNC&&5==c.dat0&&(tc_stat("cyan","Found sync"),tc.trig=30,tc.sample_point=30,c.sec=0,c.msec=0,rus_legend(),tc.raw=[],c.rcnt=0,tc.state=tc.MIN_MARK),tc.state!=tc.ACQ_SYNC&&c.wait<=0&&(t=2<=c.dat0?1:0,tc.raw[c.rcnt]=t,tc_dmsg(t),[0,2,7,10,15,17,23,24,32,37,40,46,52].includes(c.rcnt)&&tc_dmsg(" "),c.rcnt++,c.wait=700),c.prev_zero_width=c.zero_width),tc.data?c.one_width=0:c.zero_width=0)),tc.data?c.one_width++:c.zero_width++,60==c.rcnt&&(rus_ampl_decode(tc.raw),rus_legend(),tc.raw=[],c.rcnt=0,c.sec=-1),c.msec+=10,1e3==c.msec&&(c.sec++,c.msec=0)}function rus_focus(){}function rus_blur(){var t=w3_el("id-tc-bits");t&&(t.innerHTML=""),(t=w3_el("id-tc-rus"))&&(t.innerHTML="")}function rus_init(){w3_el("id-tc-addon").innerHTML+=w3_div("id-tc-bits")+w3_div("id-tc-rus")}



