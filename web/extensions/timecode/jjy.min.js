

/* web/extensions/timecode/jjy.min.js (web/extensions/timecode/jjy.js = Sun Feb 14 09:38:51 2021) */
var jjy={AMPL_NOISE_THRESHOLD:3,arm:0,prev_zero_width:0,cur:0,cnt:0,width:0,dcnt:0,tick:0,min:0,time0:0,time0_copy:0,line:0,end:null};function jjy_dmsg(t){w3_innerHTML("id-tc-jjy",t)}function jjy_legend(){0==(3&jjy.line++)&&tc_dmsg("M mmm0mmmm M00 hh0hhhh M00 dd0ddddMdddd 00 ppU MU yyyyyyyy M www LS 0000 M<br>")}function jjy_ampl_decode(t){var c=(tc_gap_bcd(t,8,8,-1)+1)%60,e=tc_gap_bcd(t,18,7,-1),d=tc_gap_bcd(t,33,12,-1),i=tc_bcd(t,48,8,-1)+2e3,_=kiwi_UTCdoyToDate(d,i,e,c,0),n=(_=new Date(_.getTime()-324e5)).toLocaleString("en-US",{timeZone:"Japan"});n=n.split("/");var a=tc.mo[+n[0]-1],r=n[1].fieldWidth(2)+" "+a+" "+i+" "+e.leadingZeros(2)+":"+c.leadingZeros(2)+" JST";tc_dmsg("  day #"+d+" "+r+"<br>"),tc_stat("lime","Time decoded: "+r)}function jjy_clr(){var t=jjy;t.arm=0,t.cnt=t.dcnt=0,t.prev_zero_width=t.one_width=t.zero_width=0,t.line=0}function jjy_ampl(t){var c=jjy;if(tc.trig++,tc.trig>=100&&(tc.trig=0),t=t>.95?1:0,tc.ref||(tc.data=t,tc.ref=1),t==c.cur?c.cnt=0:(c.cnt++,c.cnt>c.AMPL_NOISE_THRESHOLD&&(c.cur=t,c.cnt=0,tc.data^=1,tc.data&&(tc.state==tc.ACQ_SYNC&&c.prev_zero_width>0&&c.prev_zero_width>75&&c.zero_width>55&&(tc_stat("cyan","Found sync"),tc.trig=-20,tc.sample_point=80,c.sec=0,c.msec=0,jjy_legend(),tc.raw=[],tc.state=tc.MIN_MARK),c.prev_zero_width=c.zero_width),tc.data?c.one_width=0:c.zero_width=0)),tc.data?c.one_width++:c.zero_width++,tc.state==tc.MIN_MARK||tc.state==tc.ACQ_DATA&&tc.sample_point==tc.trig){var e=tc.state==tc.MIN_MARK||c.one_width<=60?1:0;tc_dmsg(e),tc.raw[c.sec]=e,[0,8,11,18,21,33,35,38,40,48,49,52,54,58].includes(c.dcnt)&&tc_dmsg(" "),tc.state==tc.MIN_MARK&&(c.msec=990,tc.state=tc.ACQ_DATA),c.dcnt++,60==c.dcnt&&(jjy_ampl_decode(tc.raw),jjy_legend(),tc.raw=[],c.sec=-1,c.dcnt=0)}c.msec+=10,1e3==c.msec&&(c.sec++,c.msec=0)}function jjy_focus(){}function jjy_blur(){var t;(t=w3_el("id-tc-bits"))&&(t.innerHTML=""),(t=w3_el("id-tc-jjy"))&&(t.innerHTML="")}function jjy_init(){w3_el("id-tc-addon").innerHTML+=w3_div("id-tc-bits")+w3_div("id-tc-jjy")}


