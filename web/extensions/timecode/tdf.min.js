

/* web/extensions/timecode/tdf.min.js (web/extensions/timecode/tdf.js = Thu Jun  2 10:19:22 2022) */
var tdf={arm:0,mod_threshold:.3,no_modulation:0,slice_period:150,slice_threshold:5,modct:0,sec:0,msec:0,line:0,dcnt:0,end:null};function tdf_dmsg(t){w3_innerHTML("id-tc-tdf",t)}function tdf_legend(){0==(3&tdf.line++)&&tc_dmsg("0 LS hhhh 000000 HH 0 ASN 01 mmmmmmm p hhhhhh p dddddd www mmmmm yyyyyyyy p 0<br>")}function tdf_decode(t){var d=tc_bcd(t,21,7,1),c=tc_bcd(t,29,6,1),e=tc_bcd(t,36,6,1),n=(tc_bcd(t,42,3,1),tc_bcd(t,45,5,1)-1),o=tc_bcd(t,50,8,1)+2e3,t=t[17]?"CEST":t[18]?"CET":"TZ?";tc_dmsg("  "+e+" "+tc.mo[n]+" "+o+" "+c.leadingZeros(2)+":"+d.leadingZeros(2)+" "+t+"<br>"),tc_stat("lime","Time decoded: "+e+" "+tc.mo[n]+" "+o+" "+c.leadingZeros(2)+":"+d.leadingZeros(2)+" "+t)}function tdf_clr(){tdf.arm=tdf.no_modulation=tdf.dcnt=tdf.modct=tdf.line=tdf.sec=tdf.msec=0}function tdf_phase(t){var d=tdf,t=Math.abs(t);t<d.mod_threshold?(100==tc.no_modulation&&(d.arm=1,d.modct=0),tc.no_modulation++):(d.arm&&t>=d.mod_threshold&&(0==d.modct&&(scope_clr(),tc.mkr=1,d.sec=0,d.msec=0,tc.state==tc.ACQ_SYNC?tc_stat("cyan","Found sync"):tdf_decode(tc.raw),tdf_legend(),tc.raw=[],d.dcnt=0,tc.state=tc.ACQ_DATA),d.arm=0),tc.no_modulation=0,d.modct++),d.msec+=10,1e3==d.msec&&(d.sec++,d.msec=0,d.modct=0),tc.state==tc.ACQ_DATA&&d.msec==d.slice_period?(tc.mkr=2,t=d.modct>=d.slice_threshold?1:0,tc.trig=2+t,tc.raw[d.sec]=t,tc_dmsg(t),[0,2,6,12,14,15,18,20,27,28,34,35,41,44,49,57,58].includes(d.dcnt)&&tc_dmsg(" "),d.dcnt++,60==d.dcnt&&(d.dcnt=0)):tc.trig=1}function tdf_focus(){}function tdf_blur(){var t=w3_el("id-tc-tdf");t&&(t.innerHTML="")}function tdf_init(){w3_el("id-tc-addon").innerHTML+=w3_div("id-tc-tdf")}



