

/* web/extensions/DRM/DRM.min.js (web/extensions/DRM/DRM.js = Tue Feb 14 08:59:26 2023) */
var drm={ext_name:"DRM",first_time:!0,active:!1,special_passband:null,dseq:0,interval:null,interval2:null,info_msg:"<br>",error:!1,locked:0,wrong_srate:!1,hacked:!1,run:0,is_stopped:0,is_monitor:0,freq_s:"",freq:0,nsvcs:4,csvc:1,w_multi_nom:675,w_multi_min:400,h_data:300,status_tc:["black","black","white","white","white"],status_bc:["lime","yellow","red","red","grey"],ST_GRN:0,ST_YEL:1,ST_RED:2,ST_GRY:4,panel_0:["info","info","info","info","info","info","info","info","info","info","info"],panel_1:["by-svc","by-time","by-freq","EPG","journaline","slideshow","graph","IQ","IQ","IQ","IQ"],display:0,BY_SVC:0,BY_TIME:1,BY_FREQ:2,EPG:3,JOURNALINE:4,SLIDESHOW:5,GRAPH:6,IQ_ALL:7,FAC:8,SDC:9,MSC:10,IQ_END:10,display_idx_s:["schedule","program","journaline","slideshow","graph","iq"],display_idx_si:[1,5,6,7,9,11],display_idx:1,JOURNALINE_IDX:6,SLIDESHOW_IDX:7,display_s:{Schedule:[{m:"by service"},{m:"by time"},{m:"by freq"}],Media:[{m:"Program Guide"},{m:"Journaline&reg;"},{m:"Slideshow"}],Stats:[{m:"IF/SNR",c:"graph"}],IQ:[{m:"all",c:"IQ"},{m:"FAC",c:"IQ"},{m:"SDC",c:"IQ"},{m:"MSC",c:"IQ"}]},stations:null,using_default:!1,double_fault:!1,loading_msg:"&nbsp;loading data from kiwisdr.com ...",SINGLE:0,MULTI:1,REGION:2,SERVICE:3,monitor:0,database:0,database_s:["drmrx.org","kiwisdr.com"],database_url:[kiwi_SSL()+"drm.kiwisdr.com/drm/drmrx.cjson",kiwi_SSL()+"drm.kiwisdr.com/drm/stations2.cjson"],last_occ:-1,last_ilv:-1,last_sdc:-1,last_msc:-1,DRM_DAT_IQ:0,EAudCod:["AAC","OPUS","RESERVED","xHE_AAC",""],AAC:0,xHE_AAC:3,bands:[{n:"LW",b:140,e:300},{n:"MW",b:500,e:1700},{n:"120m",b:22500,e:2500},{n:"90m",b:3100,e:3500},{n:"75m",b:3800,e:4100},{n:"60m",b:4700,e:5100},{n:"49m",b:5800,e:6300},{n:"41m",b:7200,e:7600},{n:"31m",b:9300,e:1e4},{n:"25m",b:11500,e:12200},{n:"22m",b:13500,e:14e3},{n:"19m",b:15e3,e:15900},{n:"16m",b:17400,e:18e3},{n:"15m",b:18800,e:19100},{n:"13m",b:21400,e:22e3},{n:"11m",b:25500,e:26200}],JOURNALINE_LINK_NOT_ACTIVE:-1,JOURNALINE_IS_NO_LINK:-2,journaline_objID:0,journaline_stk:[],SS_PLAY:2,SS_RESET:-2,cur_slide:-1,slides:[],play:0,ss_ping_pong:0,last_last:0};function DRM_main(){ext_switch_to_client(drm.ext_name,drm.first_time,drm_recv),drm.first_time||drm_lock_setup(),drm.first_time=!1}function drm_recv(e){if("DAT"!=arrayBufferToStringLen(e,3))for(var r=arrayBufferToString(e).substring(4).split(" "),d=0;d<r.length;d++){var s=r[d].split("=");switch(0,s[0]){case"ready":kiwi_load_js(["pkgs/js/graph.js","pkgs/js/sprintf/sprintf.js"],"drm_lock_setup");break;case"inuse":drm.inuse=+s[1];break;case"heavy":drm.heavy=+s[1];break;case"locked":var i=+s[1];-1==i?(drm.wrong_srate=!0,drm.locked=0):-2==i?(drm.hacked=!0,drm.locked=0):drm.locked=1==i?1:0,drm_controls_setup();break;case"drm_status_cb":if(!drm.run||!drm.desktop)break;var t=kiwi_decodeURIComponent("DRM",s[1]);if(!t)break;if(!(o=kiwi_JSON_parse("drm_status_cb",t)))break;drm_all_status(o.io,o.time,o.frame,o.FAC,o.SDC,o.MSC),w3_innerHTML("id-drm-if_level","IF Level: "+o.if.toFixed(1)+" dB"),o.if<0&&-100<o.if&&(isUndefined(drm.last_if)&&(drm.last_if=o.if),drm.last_if=graph_plot(drm.gr_if,o.if,{line:drm.last_if,color:"green"})),w3_innerHTML("id-drm-snr",o.snr?"SNR: "+o.snr.toFixed(1)+" dB":""),0<o.snr&&(isUndefined(drm.last_snr)&&(drm.last_snr=o.snr),drm.last_snr=graph_plot(drm.gr_snr,o.snr,{line:drm.last_snr})),isDefined(o.mod)?(0<=(d=o.mod)&&d<=3&&w3_color("id-drm-mod-"+["A","B","C","D"][d],"black","lime"),0<=(d=o.occ)&&d<=5&&(drm.last_occ!=d&&w3_color("id-drm-occ-"+["4.5","5","9","10","18","20"][drm.last_occ],"",""),w3_color("id-drm-occ-"+["4.5","5","9","10","18","20"][d],"black","lime"),drm.last_occ=d),0<=(d=o.ilv)&&d<=1&&(drm.last_ilv!=d&&w3_color("id-drm-ilv-"+["L","S"][drm.last_ilv],"",""),w3_color("id-drm-ilv-"+["L","S"][d],"black","lime"),drm.last_ilv=d),0<=(d=o.sdc)&&d<=1&&(drm.last_sdc!=d&&w3_color("id-drm-sdc-"+["4","16"][drm.last_sdc],"",""),w3_color("id-drm-sdc-"+["4","16"][d],"black","lime"),drm.last_sdc=d),1<=(d=2<(d=o.msc)?2:d)&&d<=2&&(drm.last_msc!=d&&w3_color("id-drm-msc-"+["16","64"][drm.last_msc-1],"",""),w3_color("id-drm-msc-"+["16","64"][d-1],"black","lime"),drm.last_msc=d),w3_innerHTML("id-drm-prot",sprintf("Protect: A=%d B=%d",o.pla,o.plb)),w3_innerHTML("id-drm-nsvc",sprintf("Services: A=%d D=%d",o.nas,o.nds)),0<=o.mod&&o.mod<=3&&!drm.error&&(drm.info_msg=["Mode A: Local/regional use","Mode B: Medium range use, multipath resistant","Mode C: Long distance use, multipath/doppler resistant","Mode D: Resistance to large delay/doppler spread"][o.mod])):drm_reset_status(),w3_show_hide("id-drm-mode",isDefined(o.mod));var n=drm.AAC;o.svc.forEach(function(e,r){a=++r;var d=isDefined(e.id);d&&(s=kiwi_clean_html(kiwi_clean_newline(decodeURIComponent(e.lbl))),a+=" "+drm.EAudCod[e.ac]+" ("+e.id+") "+s+(e.ep?" UEP ("+e.ep.toFixed(1)+"%) ":" EEP ")+(e.ad?"Audio ":"Data ")+e.br.toFixed(2)+" kbps");var s=w3_el("id-drm-svc-"+r);s.innerHTML=a,d&&(w3_color(s,null,e.cur?"mediumSlateBlue":""),e.cur&&e.ac<4&&(n=e.ac),w3_visible("id-drm-data-"+r,-1!=e.dat),-1!=e.dat&&w3_color("id-drm-data-"+r,drm.status_tc[e.dat],drm.status_bc[e.dat]))}),w3_show("id-drm-svcs"),n!=drm.AAC&&n!=drm.xHE_AAC?(console.log("codec="+n),a="WARNING: codec not supported -- audio will be bad",drm.error=!0):(a=drm.info_msg,drm.error=!1),w3_innerHTML("id-drm-info",a),w3_color("id-drm-info","white","red",drm.error),w3_innerHTML("id-drm-msgs",o.msg?kiwi_clean_html(kiwi_clean_newline(decodeURIComponent(o.msg))):"");break;case"drm_journaline_cb":var a=kiwi_decodeURIComponent("DRM",s[1]),o=kiwi_JSON_parse("drm_journaline_cb",a);isNull(o)?(a="&nbsp;(data error, see browser console log)",drm_status("journaline",drm.ST_YEL)):(m=+o.l,a=m?w3_icon("w3-link-darker-color w3-margin-LR-4","fa-backward",24,"","drm_journaline_back"):"",a+="&nbsp;NewsService Journaline&reg; &#8209; ",drm.journaline_objID=m,i=""==o.t?"Waiting for data..":o.t,a+=i,dbgUs&&(a+=" ("+m.toHex()+")"),a+="<br><ul>",o.a.forEach(function(e,r){e.l==drm.JOURNALINE_IS_NO_LINK?a+=e.s+"<br>":e.l==drm.JOURNALINE_LINK_NOT_ACTIVE?a+="<li>"+e.s+"</li>":(a+="<li>"+w3_link("w3-underline w3-link-darker-color","",e.s,"","drm_journaline_link",e.l.toHex()),dbgUs&&(a+=" ("+e.l.toHex()+")"),a+="</li>")}),a+="</ul>",drm_status("journaline",drm.ST_GRN)),w3_innerHTML("id-drm-journaline",a);break;case"drm_slideshow_status":drm_status("slideshow",drm.ST_GRN);break;case"drm_slideshow_cb":var _=kiwi_decodeURIComponent("DRM",s[1]);console.log("DRM slideshow fn="+_),drm.slides.push(_),drm.slides=kiwi_dedup_array(drm.slides),drm.play||drm_slideshow_display(drm.slides.length-1);break;case"drm_bar_pct":if(!drm.run)break;var m=w3_clamp(parseInt(s[1]),0,100),_=w3_el("id-drm-bar");_&&(_.style.width=m+"%");break;case"annotate":switch(+s[1]){case 0:drm_annotate("lime");break;case 1:drm_annotate("gold");break;case 2:drm_annotate("red");break;case 3:drm_annotate("blue")}break;default:console.log("drm_recv: UNKNOWN CMD "+s[0])}}else{var l=new Uint8Array(e,4)[0],c=new Uint8Array(e,5),e=c.length-1;if(!isUndefined(drm.canvas_IQ)){var w=drm.canvas_IQ.ctx,p=drm.w_IQ,h=drm.h_IQ;if(l===drm.DRM_DAT_IQ){if(w.fillStyle="white",w.fillRect(0,0,p,h),w.fillStyle="grey",w.fillRect(0,h/2,p,1),w.fillRect(p/2,0,1,h),drm.display==drm.IQ_ALL||drm.display==drm.FAC)for(w.fillStyle="green",d=0;d<64;d++){var u=c[2*d]/255*p,b=c[2*d+1]/255*h;w.fillRect(u,b,2,2)}if(d=64,drm.display==drm.IQ_ALL||drm.display==drm.SDC)for(w.fillStyle="red";d<320;d++){u=c[2*d]/255*p,b=c[2*d+1]/255*h;w.fillRect(u,b,2,2)}if(d=320,drm.display==drm.IQ_ALL||drm.display==drm.MSC)for(w.fillStyle="blue";d<2368;d++){u=c[2*d]/255*p,b=c[2*d+1]/255*h;w.fillRect(u,b,2,2)}}else console.log("drm_recv: DATA UNKNOWN cmd="+l+" len="+e)}}}function drm_journaline_init(){}function drm_journaline_select(){}function drm_journaline_reset_cb(e,r,d){d||+r&&(console.log("drm_journaline_reset_cb"),ext_send("SET journaline_objID=-1"))}function drm_journaline_link(e,r){r=+r;console.log("drm_journaline_link objID="+r.toHex()),0!=r?(drm.journaline_stk.push(drm.journaline_objID),ext_send("SET journaline_objID="+r)):console.log("drm_journaline_link objID=0?")}function drm_journaline_back(e,r){var d;0!=drm.journaline_stk.length?(d=drm.journaline_stk.pop(),console.log("drm_journaline_back "+d.toHex()),ext_send("SET journaline_objID="+d)):console.log("drm_journaline_back EMPTY stk")}function drm_slideshow_init(){}function drm_slideshow_select(){drm_slideshow_display(0)}function drm_slideshow_display(e){var r,d,s;drm.cur_slide=drm.slides.length?w3_clamp(e,0,drm.slides.length-1):-1,s=drm.cur_slide<0?(d="No",drm.ss_img[0].src="",drm.ss_img[1].src="",drm.ss_ping_pong=0,"No images received"):(d=drm.slides.length,drm.ss_ping_pong^=1,e=drm.ss_ping_pong,r="kiwi.data/drm.ch"+rx_chan+"_"+drm.slides[drm.cur_slide],drm.ss_img[e].src=r,drm.ss_img[1^e].style.opacity=0,drm.ss_img[e].style.opacity=1,w3_innerHTML(drm.ss_info,""),sprintf("%d of %d",drm.cur_slide+1,+d)),w3_innerHTML("id-drm-nslides",d+" image"+(1!=d?"s":"")+" received"),drm.cur_slide<0?(drm.ss_info.style.top=0,w3_innerHTML(drm.ss_info,s)):w3_img_wh(r,function(e,r){drm.ss_info.style.top=px(r),w3_innerHTML(drm.ss_info,s)}),w3_colors("id-drm-btn-play","w3-text-pink","w3-text-css-lime",drm.play),w3_spin("id-drm-btn-play",drm.play)}function drm_slideshow_step_cb(e,r,d){if(!d){var s=0;switch(r=+r){case 0:drm.cur_slide=0;break;case 1:case-1:drm.cur_slide+=r;break;case drm.SS_RESET:default:drm.slides=[],drm.play=0;break;case drm.SS_PLAY:drm.slides.length&&(drm.play^=1,drm.play&&(s=1))}drm_slideshow_display(drm.cur_slide),s?drm.slideshow_interval=setInterval(function(){drm.slides.length&&(drm.cur_slide++,drm.cur_slide>=drm.slides.length&&(drm.cur_slide=0),drm_slideshow_display(drm.cur_slide))},5e3):kiwi_clearInterval(drm.slideshow_interval)}}function drm_annotate(e){graph_annotate(drm.gr_if,e),graph_annotate(drm.gr_snr,e)}function drm_reset_status(){drm_all_status(),w3_innerHTML("id-drm-if_level",""),w3_innerHTML("id-drm-snr",""),w3_hide("id-drm-mode");for(var e=0;e<=3;e++)w3_color("id-drm-mod-"+["A","B","C","D"][e],"","");drm.info_msg="<br>",drm_status("program"),drm_status("journaline"),drm_status("slideshow"),w3_innerHTML("id-drm-info",""),w3_hide("id-drm-svcs"),w3_innerHTML("id-drm-msgs","")}function drm_status(e,r,d){isUndefined(d)||console.log("drm_status "+e+" from="+d+" v="+r),isUndefined(r)&&(r=drm.ST_GRY),w3_color("id-drm-status-"+e.slice(0,5),drm.status_bc[r])}function drm_all_status(e,r,d,s,i,t){drm_status("io",e),drm_status("time",r),drm_status("frame",d),drm_status("fac",s),drm_status("sdc",i),drm_status("msc",t)}function drm_lock_setup(){ext_send("SET lock_set")}function drm_saved_mode(){drm.saved_mode=ext_get_mode(),console.log("drm_save_mode FIRST saved_mode="+drm.saved_mode),"drm"==drm.saved_mode&&(drm.saved_mode=ext_get_prev_mode()),console.log("drm_save_mode FINAL saved_mode="+drm.saved_mode)}function drm_tscale(e){var r=drm.mobile?0:20;return(27+e*(drm.w_sched-27-r-15)/24).toFixed(0)}function drm_schedule_static(){for(var e="",r=0;r<=24;r++)e+=w3_div(sprintf("id-drm-sched-tscale|left:%spx;",drm_tscale(r)));return e+=w3_div(sprintf("id-drm-sched-now|left:%spx;",drm_tscale(kiwi_UTC_minutes()/60))),null==drm.interval&&(drm.interval=setInterval(function(){w3_el("id-drm-sched-now").style.left=px(drm_tscale(kiwi_UTC_minutes()/60))},6e4)),e}function drm_pre_set_freq(e,r){1!=isArg(r)&&(console.log("drm_pre_select_cb  RESET special_passband ########"),drm.special_passband=null),drm_station(r||""),drm_set_freq(e),drm_start()}function drm_click(e){var r=drm.stations[e];drm.special_passband=null,r.u&&(e=new RegExp("^.*?f=/([-0-9.k]*)?,?([-0-9.k]*)?.*$").exec(r.u),console.log(e),e&&3==e.length&&(drm.special_passband={low:e[1].parseFloatWithUnits("k"),high:e[2].parseFloatWithUnits("k")})),console.log("special_passband:"),drm.special_passband?console.log(drm.special_passband):console.log("(none)"),w3_hide("id-drm-bar-container"),drm_pre_set_freq(r.f,r.s)}function drm_freq_time(e){var r=Math.trunc(e.b),d=Math.round(60*(e.b-r)),s=Math.trunc(e.e),i=Math.round(60*(e.e-s));return e.f.toFixed(0)+" kHz\n"+r.leadingZeros(2)+d.leadingZeros(2)+"-"+s.leadingZeros(2)+i.leadingZeros(2)}function drm_schedule_svc(){if(!drm.stations)return"";for(var e=drm.using_default?w3_div("w3-yellow w3-padding w3-show-inline-block","can't contact kiwisdr.com<br>using default data"):"",r=drm.narrow_listing,d=drm_tscale(r?1:.25),s=0;s<drm.stations.length;s++){var i=drm.stations[s];if(i.t!=drm.REGION){for(var t=i.s,n=i.f,a=i.u,o="",_=t.replace("_"," "),m=((_+="&nbsp;&nbsp;&nbsp;"+(r?"<br>":"")+n).match(/<br>/g)||[1]).length+(r?2:1),l=Math.max(20*(m-1),30);s<drm.stations.length&&i.s==t&&i.f==n;){var c=drm_tscale(i.b),w=drm_tscale(i.e);o+=w3_div(sprintf('id-drm-sched-time %s|left:%spx; width:%spx; height:%dpx|title="%s" onclick="drm_click(%d);"',i.v?"w3-light-green":"",c,(w-c+2).toFixed(0),l,drm_freq_time(i),s)),s++,i=drm.stations[s]}s--;var p="";a&&(p=w3_link("w3-valign",a,w3_icon("w3-link-darker-color cl-drm-sched-info","fa-info-circle",24))),e+=w3_inline("cl-drm-sched-station cl-drm-sched-striped/w3-valign",w3_div(sprintf("|font-size:%dem",m),"&nbsp;"),p,o,w3_div(sprintf("cl-drm-station-name|left:%spx",d),_)),i&&i.t==drm.SERVICE&&(e+=w3_div("cl-drm-sched-hr-div cl-drm-sched-striped",'<hr class="cl-drm-sched-hr">'),s++)}}return e}function drm_schedule_time_freq(i){if(!drm.stations)return"";var e=drm.using_default?w3_div("w3-yellow w3-padding w3-show-inline-block","can't contact kiwisdr.com<br>using default data"):"",r=drm.narrow_listing;drm.stations_freq=[];kiwi_UTC_minutes();for(var d=b=0;d<drm.stations.length;d++)(n=drm.stations[d]).t!=drm.SINGLE&&n.t!=drm.MULTI||(drm.stations_freq[b++]=n);drm.stations_freq.sort(function(e,r){var d=i?e.f:e.b,s=i?r.f:r.b,e=e.s.startsWith("India,"),r=r.s.startsWith("India,");return e&&!r?1:!e&&r||d<s?-1:s<d?1:0}),console.log("sort_by_freq="+i+" ..."),console.log(drm.stations_freq);var s=drm_tscale(r?1:.25),t="";for(d=0;d<drm.stations_freq.length;d++){for(var n,a=(n=drm.stations_freq[d]).s,o=n.f,_=n.u,m="",l=a.replace("_",r?"<br>":" "),c=((l=o+"&nbsp;&nbsp;&nbsp;"+(r?"<br>":"")+(l=r?l.replace(",","<br>"):l)).match(/<br>/g)||[1]).length+(r?2:1),w=Math.max(20*(c-1),30);d<drm.stations_freq.length&&n.s==a&&n.f==o;){var p=drm_tscale(n.b),h=drm_tscale(n.e);m+=w3_div(sprintf('id-drm-sched-time %s|left:%spx; width:%spx; height:%dpx|title="%s" onclick="drm_click(%d);"',n.v?"w3-light-green":"",p,(h-p+2).toFixed(0),w,drm_freq_time(n),n.i)),d++,n=drm.stations_freq[d]}if(d--,i){for(var u=null,b=0;b<drm.bands.length;b++){var g=drm.bands[b];if(o>=g.b&&o<=g.e){u=g.n;break}}u&&u!=t&&(e+=w3_inline_percent("cl-drm-sched-hr-div cl-drm-sched-striped/",'<hr class="cl-drm-sched-hr">',10,"<b>"+u+"</b>",5,'<hr class="cl-drm-sched-hr">'),t=u)}var f="";_&&(f=w3_link("w3-valign",_,w3_icon("w3-link-darker-color cl-drm-sched-info","fa-info-circle",24))),e+=w3_inline("cl-drm-sched-station cl-drm-sched-striped/w3-valign",w3_div(sprintf("|font-size:%dem",c),"&nbsp;"),f,m,w3_div(sprintf("cl-drm-station-name|left:%spx",s),l))}return e}function drm_get_stations_done_cb(e){var r=!1;if(e?e.AJAX_error&&"timeout"==e.AJAX_error?(console.log("drm_get_stations_done_cb: TIMEOUT"),r=drm.using_default=!0):e.AJAX_error&&"status"==e.AJAX_error?(console.log("drm_get_stations_done_cb: status="+e.status),r=drm.using_default=!0):isArray(e)||(console.log("drm_get_stations_done_cb: not array"),r=!0):(console.log("drm_get_stations_done_cb: stations="+e),r=!0),r){if(drm.double_fault)return void console.log("drm_get_stations_done_cb: default station list fetch FAILED");console.log(e);var t=kiwi_url_origin()+"/extensions/DRM/stations.cjson";return console.log("drm_get_stations_done_cb: using default station list "+t),drm.using_default=!0,drm.double_fault=!0,void kiwi_ajax_progress(t,"drm_get_stations_done_cb",0,1e4)}console.log("drm_get_stations_done_cb: from "+drm.database_url[drm.database]);try{drm.stations=[];var n,a,o,_,m,l,c,w=0,p=!1;e.forEach(function(e,r){l="",w3_obj_enum(e,function(e,r,d){if(0==r)"India MW"==(n=e)&&(l="India, ",p=!0),drm.stations.push({t:drm.REGION,f:0,s:"",r:n}),w++;else if(isArray(d)){for(a=l+e,t=null,r=0;r<d.length;r++){var s=d[r];if(0==r&&isString(s))t=s;else if(o=s,s=d[++r],isArray(s))for(var i=0;i<s.length;i++)_=kiwi_hh_mm(s[i++]),m=kiwi_hh_mm(s[i]),c=_<0||m<0,0!=drm.database&&(c=!c),_=Math.abs(_),m=Math.abs(m),m<_?(drm.stations.push({t:drm.MULTI,f:o,s:a,r:n,b:_,e:24,v:c,u:t,i:w}),w++,drm.stations.push({t:drm.MULTI,f:o,s:a,r:n,b:0,e:m,v:c,u:t,i:w})):drm.stations.push({t:drm.MULTI,f:o,s:a,r:n,b:_,e:m,v:c,u:t,i:w}),w++;else _=kiwi_hh_mm(d[r++]),m=kiwi_hh_mm(d[r]),c=_<0||m<0,0!=drm.database&&(c=!c),_=Math.abs(_),m=Math.abs(m),m<_?(drm.stations.push({t:drm.SINGLE,f:o,s:a,r:n,b:_,e:24,v:c,u:t,i:w}),w++,drm.stations.push({t:drm.SINGLE,f:o,s:a,r:n,b:0,e:m,v:c,u:t,i:w})):drm.stations.push({t:drm.SINGLE,f:o,s:a,r:n,b:_,e:m,v:c,u:t,i:w}),w++}p||(drm.stations.push({t:drm.SERVICE,f:0,s:a,r:n}),w++)}})}),console.log(drm.stations)}catch(e){console.log("drm_get_stations_done_cb: catch"),console.log(e)}w3_innerHTML("id-drm-panel-by-svc",drm_schedule_svc()),w3_innerHTML("id-drm-panel-by-time",drm_schedule_time_freq(0)),w3_innerHTML("id-drm-panel-by-freq",drm_schedule_time_freq(1))}function drm_panel_show(e,r){e=w3_div("id-drm-controls w3-text-white",w3_divs("",w3_div("w3-medium w3-text-aqua","<b>Digital Radio Mondiale (DRM30) decoder</b>"),w3_col_percent("w3-margin-T-4/",w3_div("id-drm-station w3-text-css-yellow","&nbsp;"),70,w3_div("",'Based on <b><a href="https://sourceforge.net/projects/drm/" target="_blank">Dream 2.2.1</a></b>')),e));ext_panel_show(e,r,null),ext_set_controls_width_height(600,120)}function drm_mobile_controls_setup(r){drm.mobile=drm.mobile||1,console.log("$ mobile drm mobile_laptop_test="+mobile_laptop_test),drm.w_nom=drm.w_sched=300,drm.h_sched=mobile_laptop_test?100:230,drm.cpanel_margin=20;var e=w3_div(sprintf("id-drm-controls w3-absolute|width:%dpx; height:%dpx;",drm.w_sched,drm.h_sched),w3_div("id-drm-panel-container cl-drm-sched|width:100%; height:100%",w3_div("id-drm-panel-by-svc-static",drm_schedule_static()),w3_div("id-drm-panel-by-svc w3-iphone-scroll w3-absolute|width:100%; height:100%;",drm.loading_msg)));ext_panel_show(e,null,null),ext_set_controls_width_height(drm.w_sched+drm.cpanel_margin,drm.h_sched+drm.cpanel_margin),drm_database_cb("drm.database",0,!0);e=w3_el("id-ext-controls-close");console.log("DRM mobile setup panelShown="+w3_el("id-ext-controls").panelShown),e.onclick=function(){toggle_panel("ext-controls",0),console.log("DRM mobile ext-controls-close panelShown="+w3_el("id-ext-controls").panelShown)},w3_create_attribute("id-ext-controls-close-img","src","icons/close.black.24.png"),drm.last_mobile={},drm.rescale_cnt=drm.rescale_cnt2=0,drm.fit="",null==drm.interval2&&(drm.interval2=setInterval(function(){var e;r=ext_mobile_info(drm.last_mobile),(drm.last_mobile=r).orient_unchanged||(drm.rescale_cnt++,e=w3_el("id-control").uiWidth,drm.w_nom+e<=r.width?(drm.w_sched=r.width-e-60,w3_el("id-ext-controls").style.zIndex=125,drm.fit="sbs"+drm.w_sched):(drm.w_sched=r.width-2*drm.cpanel_margin,w3_el("id-ext-controls").style.zIndex=150,drm.fit="fw"+drm.w_sched),ext_set_controls_width_height(drm.w_sched+drm.cpanel_margin,drm.h_sched+drm.cpanel_margin),w3_el("id-drm-controls").style.width=px(drm.w_sched),w3_innerHTML("id-drm-panel-by-svc-static",drm_schedule_static()),w3_innerHTML("id-drm-panel-by-svc",drm_schedule_svc()),w3_innerHTML("id-drm-panel-by-time",drm_schedule_time_freq(0)),w3_innerHTML("id-drm-panel-by-freq",drm_schedule_time_freq(1)))},500))}function drm_desktop_controls_setup(e){var r=null,d=drm.h_data;if(drm.wrong_srate)h=w3_text("w3-medium w3-text-css-yellow","Currently, DRM does not support Kiwis configured for 20 kHz wide channels.");else if(drm.hacked)h=w3_text("w3-medium w3-text-css-yellow","Yeah, nah..");else if(0==drm.locked)kiwi.is_multi_core?p="DRM not supported on this channel.":(w=cfg.DRM.nreg_chans,console_log("drm_nreg_chans",w),p=0==w?"Requires exclusive use of the Kiwi. There can be no other connections.":1==w?"Can only run DRM with one other Kiwi connection.<br>And the other connection is not using any extensions.":"Can only run DRM with "+w+" or fewer other Kiwi connections.<br>And the other connections are not using any extensions.",p+="<br>Please try again when these conditions are met."),h=w3_text("w3-medium w3-text-css-yellow",p);else{for(var s="Services:<br>",i=1;i<=drm.nsvcs;i++)s+=w3_inline("",w3_checkbox("w3-margin-R-4","","drm.svc"+i,i==drm.csvc,"drm_svcs_cbox_cb"),w3_span("id-drm-data-"+i+" cl-drm-data","D"),w3_div("id-drm-svc-"+i+"|width:100%"));function t(e){return w3_icon("id-drm-status-"+e.slice(0,5).toLowerCase(),"fa-square",16,"grey")+" "+e+"&nbsp;&nbsp;"}function n(e,r){return w3_span("id-drm-"+e+" cl-drm-blk",r)}function a(e){return n("mod-"+e,e)}function o(e){return n("occ-"+e,e)}function _(e){return n("ilv-"+e,e)}function m(e){return n("sdc-"+e,e)}function l(e){return n("msc-"+e,e)}var c=525+(drm.w_sched=e),w=e-10-kiwi_scrollbar_width(),p=drm.h_data-10-kiwi_scrollbar_width(),r=time_display_html("drm")+w3_div(sprintf("id-drm-panel-0-info w3-relative w3-no-scroll|width:%dpx; height:%dpx; background-color:black;",c,d),w3_div(sprintf("id-drm-console-msg w3-margin-T-2 w3-small w3-text-white w3-absolute|left:%dpx; width:%dpx; height:%dpx; overflow-x:hidden;",25,500,d),w3_div("id-drm-status",t("IO")+t("Time")+t("Frame")+t("FAC")+t("SDC")+t("MSC")),w3_inline("w3-halign-space-between|width:250px/",w3_div("id-drm-if_level"),w3_div("id-drm-snr")),w3_divs("id-drm-mode w3-hide/w3-margin-T-6",w3_inline("/w3-show-inline","DRM mode ",a("A"),a("B"),a("C"),a("D"),"&nbsp;&nbsp;&nbsp; Chan ",o("4.5"),o("5"),o("9"),o("10"),o("18"),o("20")," kHz","&nbsp;&nbsp;&nbsp; ILV ",_("L"),_("S")),w3_inline("/w3-show-inline","SDC ",m("4"),m("16")," QAM","&nbsp;&nbsp;&nbsp; MSC ",l("16"),l("64")," QAM",w3_div("id-drm-prot w3-margin-left"),w3_div("id-drm-nsvc w3-margin-left")),w3_inline("id-drm-media/w3-show-inline","Media:&nbsp;&nbsp;",t("Program Guide"),t("Journaline&reg;"),t("Slideshow"))),w3_div("id-drm-info w3-margin-T-2|width:"+px(450)),w3_div("id-drm-svcs w3-margin-T-8 w3-hide|width:"+px(450),s),w3_div(sprintf("id-drm-msgs w3-margin-T-4|width:%dpx",500))),w3_div(sprintf("id-drm-panel-multi w3-absolute|width:%dpx; height:%dpx; left:%dpx;",e,d,525),w3_div(sprintf("id-drm-panel-1-by-svc cl-drm-sched|width:%dpx; height:100%%;",e),w3_div("id-drm-tscale",drm_schedule_static()),w3_div("id-drm-panel-by-svc w3-scroll-y w3-absolute|width:100%; height:100%;",drm.loading_msg)),w3_div(sprintf("id-drm-panel-1-by-time cl-drm-sched|width:%dpx; height:100%%;",e),w3_div("id-drm-tscale",drm_schedule_static()),w3_div("id-drm-panel-by-time w3-scroll-y w3-absolute|width:100%; height:100%;",drm.loading_msg)),w3_div(sprintf("id-drm-panel-1-by-freq cl-drm-sched|width:%dpx; height:100%%;",e),w3_div("id-drm-tscale",drm_schedule_static()),w3_div("id-drm-panel-by-freq w3-scroll-y w3-absolute|width:100%; height:100%;",drm.loading_msg)),w3_div(sprintf("id-drm-panel-1-EPG w3-absolute w3-light-blue w3-text-black|width:%dpx; height:100%%;",e),w3_div("id-drm-program w3-margin-TL-10 w3-absolute w3-width-full w3-height-full w3-scroll-y","(not yet implemented)")),w3_div(sprintf("id-drm-panel-1-journaline w3-absolute w3-light-blue w3-text-black|width:%dpx; height:100%%;",e),w3_div("id-drm-journaline w3-margin-TL-10 w3-absolute w3-width-full w3-height-full w3-scroll-y")),w3_div(sprintf("id-drm-panel-1-slideshow w3-relative w3-light-blue|width:%dpx; height:100%%;",e),w3_div(sprintf("w3-margin-TL-%d w3-relative w3-scroll|width:%dpx; height:%dpx",10,w,p),w3_div("id-drm-slideshow-images",'<img id="id-drm-slideshow-img0" class="cl-drm-slideshow-img" src=""><img id="id-drm-slideshow-img1" class="cl-drm-slideshow-img" src="">'),w3_div("id-drm-slideshow-info w3-relative"))),w3_div("id-drm-panel-1-graph w3-show-block||color:mediumBlue",w3_canvas("id-drm-graph-if",e,d/2-20,{top:10}),w3_canvas("id-drm-graph-snr",e,d/2-20,{top:d/2+10})),w3_canvas("id-drm-panel-1-IQ",e,d,{pad:10})))+w3_div("id-drm-options w3-display-right w3-text-white|top:230px; right:0px; width:200px; height:200px",w3_select_hier("w3-text-red w3-width-auto","","","drm.display_idx",drm.display_idx,drm.display_s,"drm_display_cb"),w3_div("w3-margin-T-8",w3_divs("id-drm-options-by-svc id-drm-options-by-time id-drm-options-by-freq/w3-tspace-4",w3_div("cl-drm-sched-options-time w3-light-green","verified"),w3_div("cl-drm-sched-options-time","not verified")),w3_div("id-drm-options-EPG",w3_button("w3-btn w3-small w3-padding-smaller w3-grey w3-momentary","Reset","drm_EPG_reset_cb",1)),w3_div("id-drm-options-journaline",w3_button("w3-btn w3-small w3-padding-smaller w3-grey w3-momentary","Reset","drm_journaline_reset_cb",1)),w3_divs("id-drm-options-slideshow/w3-tspace-8",w3_div("id-drm-nslides"),w3_inline("/w3-margin-between-8",w3_button("w3-btn w3-small w3-padding-smaller w3-cyan","First","drm_slideshow_step_cb",0),w3_button("w3-btn w3-small w3-padding-smaller w3-ext-btn","Next","drm_slideshow_step_cb",1),w3_button("w3-btn w3-small w3-padding-smaller w3-ext-btn","Prev","drm_slideshow_step_cb",-1)),w3_inline("/w3-margin-between-8",w3_icon('id-drm-btn-play w3-static||title="play slideshow"',"fa-repeat fa-stack-1x",22,"","drm_slideshow_step_cb",drm.SS_PLAY),w3_button("w3-btn w3-small w3-padding-smaller w3-grey","Reset","drm_slideshow_step_cb",drm.SS_RESET))))),h=w3_inline("w3-halign-space-between w3-margin-T-8/",w3_text("w3-text-white","Click help button for more information. Schedule information courtesy of "+w3_link("w3-link-color","https://www.drmrx.org","drmrx.org")))+w3_inline("w3-margin-T-8/w3-margin-between-16",w3_button("id-drm-stop-button w3-padding-smaller w3-pink","Stop","drm_stop_start_cb"),w3_button("w3-padding-smaller w3-pink","Monitor IQ","drm_monitor_IQ_cb"),w3_button("w3-padding-smaller w3-aqua","Test 1","drm_test_cb",1),w3_button("w3-padding-smaller w3-aqua","Test 2","drm_test_cb",2),w3_div("id-drm-bar-container w3-progress-container w3-round-large w3-white w3-hide|width:160px; height:16px",w3_div("id-drm-bar w3-progressbar w3-round-large w3-light-green|width:50%","&nbsp;")))}drm_panel_show(h,r),ext_set_data_height(d),0!=drm.locked&&(time_display_setup("drm"),drm_database_cb("drm.database",0,!0),drm.ss_img=[],drm.ss_img[0]=w3_el("id-drm-slideshow-img0"),drm.ss_img[1]=w3_el("id-drm-slideshow-img1"),drm.ss_info=w3_el("id-drm-slideshow-info"),drm.canvas_if=w3_el("id-drm-graph-if"),drm.canvas_if.ctx=drm.canvas_if.getContext("2d"),drm.gr_if=graph_init(drm.canvas_if,{dBm:0,speed:1,averaging:!1}),graph_mode(drm.gr_if,"auto"),graph_clear(drm.gr_if),drm.canvas_snr=w3_el("id-drm-graph-snr"),drm.canvas_snr.ctx=drm.canvas_snr.getContext("2d"),drm.gr_snr=graph_init(drm.canvas_snr,{dBm:0,speed:1,averaging:!1}),graph_mode(drm.gr_snr,"auto"),graph_clear(drm.gr_snr),drm.canvas_IQ=w3_el("id-drm-panel-1-IQ"),drm.canvas_IQ.ctx=drm.canvas_IQ.getContext("2d"),drm.w_IQ=e-20,drm.h_IQ=d-20,drm.desktop=1)}function drm_controls_setup(){drm_saved_mode(),console.log("drm_controls_setup saved_mode="+drm.saved_mode),drm.saved_passband=ext_get_passband(),drm.is_stopped=0,console.log("drm_controls_setup is_stopped="+drm.is_stopped),drm.is_monitor=0,console.log("drm_controls_setup is_monitor="+drm.is_monitor),ext_send("SET monitor=0");var e=drm.url_params=ext_param();e&&(e=e.split(",")).forEach(function(e,r){console.log("DRM param1 <"+e+">");var d=(d=e.split(":"))[d.length-1].toLowerCase();w3_ext_param_array_match_str(drm.display_idx_s,e,function(e){drm.display_idx=drm.display_idx_si[e]}),(d=w3_ext_param("svc",e)).match?drm.csvc=w3_clamp(d.num,1,drm.nsvcs):(d=w3_ext_param("lo",e)).match?drm.pb_lo=d.num:(d=w3_ext_param("hi",e)).match?drm.pb_hi=d.num:(d=w3_ext_param("mobile",e)).match?drm.mobile=d.has_value?d.num:1:(d=w3_ext_param("debug",e)).match&&(d=d.has_value?d.num:0,ext_send("SET debug="+d))});var r=ext_mobile_info(),d=drm.w_multi_nom-Math.max(0,1440-r.width);drm.narrow_listing=d<drm.w_multi_nom||2==drm.mobile,drm.mobile||d<=drm.w_multi_min?drm_mobile_controls_setup(r):drm_desktop_controls_setup(d),0!=drm.locked&&(drm.active=!0,!drm.url_params||(d=parseFloat(drm.url_params))&&drm_pre_set_freq(d),(e=drm.url_params)&&(e=e.split(",")).forEach(function(e,r){var d=(d=e.split(":"))[d.length-1].toLowerCase();w3_ext_param("help",e).match?extint_help_click():(e=w3_ext_param("test",e)).match&&(e=e.has_value?e.num:1,drm_test_cb("",e=w3_clamp(e,1,2,1)))}),w3_call("drm_"+drm.panel_1[drm.display]+"_init"),drm_run(1),drm_set_freq(ext_get_freq_kHz()))}function drm_run(e){e!=drm.run&&(e&&(drm_saved_mode(),console.log("drm_run saved_mode="+drm.saved_mode),drm.saved_passband=ext_get_passband()),drm.run=e,ext_send("SET run="+drm.run))}function drm_test(e){ext_send("SET test="+e)}function drm_stop(e){drm_test(0),drm_run(0),drm_reset_status(),drm_station(""),w3_hide("id-drm-bar-container"),e?drm_set_mode("iq"):(isDefined(drm.saved_passband)&&(console_log_fqn("drm_stop RESTORE","drm.saved_passband.low","drm.saved_passband.high"),ext_set_passband(drm.saved_passband.low,drm.saved_passband.high)),isDefined(drm.saved_mode)&&(console_log_fqn("drm_stop RESTORE","drm.saved_mode"),drm_set_mode(drm.saved_mode)))}function drm_start(){drm_test(0),drm_run(1),drm_set_mode("drm"),drm.is_stopped=0,w3_button_text("id-drm-stop-button","Stop","w3-pink","w3-green")}function drm_stop_start_cb(e,r){console.log("drm_stop_start_cb ENTRY is_stopped="+drm.is_stopped),drm.is_stopped^=1,drm.is_stopped?(console.log("$drm_stop_start_cb: do stop, show start"),drm_stop(1),w3_button_text(e,"Start","w3-green","w3-pink")):(console.log("$drm_stop_start_cb: do start, show stop"),drm_start())}function drm_monitor_IQ_cb(e,r){console.log("drm_monitor_IQ_cb ENTRY is_monitor="+drm.is_monitor+" cb_param="+r),drm.is_monitor^=1,drm.is_monitor?(console.log("$drm_monitor_IQ_cb: do monitor start"),w3_remove_then_add(e,"w3-pink","w3-green"),ext_send("SET monitor=1")):(console.log("$drm_monitor_IQ_cb: do monitor stop"),w3_remove_then_add(e,"w3-green","w3-pink"),ext_send("SET monitor=0"))}function drm_set_passband(){drm.pb_lo||drm.pb_hi||extint.override_pb?console.log("drm_set_passband pb_lo,hi="+drm.pb_lo+","+drm.pb_hi+" override_pb="+extint.override_pb):drm.special_passband?(console_log_fqn("drm_set_passband SPECIAL PB","drm.special_passband.low","drm.special_passband.high"),ext_set_passband(drm.special_passband.low,drm.special_passband.high)):(console.log("drm_set_passband DEFAULT PB"),ext_set_passband(-5e3,5e3))}function drm_set_mode(e){console_log("drm_set_mode",e),ext_set_mode(e,null,{no_drm_proc:!0}),"drm"==e&&drm_set_passband()}function drm_set_freq(e){drm.freq=e;var r=ext_get_zoom();r<5?r=5:9<r&&(r=9);var d=drm.pb_lo||drm.pb_hi||extint.override_pb,e=d?ext_get_passband():null;ext_tune(drm.freq,"drm",ext_zoom.ABS,r),d&&ext_set_passband(e.low,e.high),drm_set_passband()}function drm_reset_cb(e,r,d){console.log("drm_reset_cb"),ext_send("SET reset")}function drm_test_cb(e,r,d){console.log("drm_test_cb "+r),drm_station("Test Recording "+r),drm_run(0),drm_start(),drm_test(r),drm_set_mode("drm"),w3_show("id-drm-bar-container"),drm_annotate("magenta"),"DRM.BBC.Journaline.au"==cfg.DRM["test_file"+r]&&(drm.display_idx=drm.JOURNALINE_IDX,drm_display_cb("drm.display_idx",drm.display_idx),drm_svcs_cbox_cb("drm.svc2",!0)),"DRM.KTWR.slideshow.au"==cfg.DRM["test_file"+r]&&(drm.display_idx=drm.SLIDESHOW_IDX,drm_display_cb("drm.display_idx",drm.display_idx),drm_svcs_cbox_cb("drm.svc2",!0))}function drm_svcs_cbox_cb(e,r,d){var s=e.substr(-1,1);if(!d){for(var i=1;i<=drm.nsvcs;i++)w3_checkbox_set("drm.svc"+i,!1);w3_checkbox_set(e,!0),ext_send("SET svc="+s)}}function drm_database_cb(e,r,d){r=+(r=d?readCookie("last_drm",0):r),writeCookie("last_drm",r),w3_select_value(e,r),drm.database=r,console.log("drm_database_cb database="+drm.database+" "+drm.database_url[drm.database]),drm.using_default=drm.double_fault=!1,e=drm.database_url[drm.database],r=1e4,kiwi_ajax_progress(e,"drm_get_stations_done_cb",0,r)}function drm_display_cb(e,r,d){r=d?drm.display_idx:+r,w3_select_value(e,r);var s=0,i=-1,t=!1;w3_select_enum(e,function(e){e.disabled||(t||e.value!=r||(i=s,t=!0),s++)});e=drm.display=i;console.log("$ drm_display_cb idx="+r+" show="+e+" "+drm.panel_0[e]+"/"+drm.panel_1[e]),drm.panel_0.forEach(function(e){w3_hide("id-drm-panel-0-"+e)}),drm.panel_1.forEach(function(e){w3_hide("id-drm-panel-1-"+e)}),drm.panel_1.forEach(function(e){w3_hide("id-drm-options-"+e)}),w3_show("id-drm-panel-0-"+drm.panel_0[e]),w3_show("id-drm-panel-1-"+drm.panel_1[e]),w3_show("id-drm-options-"+drm.panel_1[e]),ext_send("SET send_iq="+(e>=drm.IQ_ALL&&e<=drm.IQ_END?1:0)),w3_call("drm_"+drm.panel_1[drm.display]+"_select")}function drm_station(e){var r;drm.desktop&&(r=w3_el("id-drm-station"),""==(drm.last_station=e)&&(e="&nbsp;"),r&&(r.innerHTML="<b>"+e.replace("_"," ")+"</b>",drm_annotate("magenta")))}function DRM_environment_changed(e){var r=ext_get_freq()/1e3,d=ext_get_mode();drm.freq==r&&"drm"==d||drm_station("")}function DRM_blur(){console.log("DRM_blur saved_mode="+drm.saved_mode),kiwi_clearInterval(drm.interval),drm.interval=null,kiwi_clearInterval(drm.interval2),drm.interval2=null,drm.active=!1,drm_stop(0),!isUndefined(drm.saved_mode)&&"drm"!=drm.saved_mode||(console.log("DRM_blur FORCE iq"),drm_set_mode("iq")),drm.locked=0,ext_send("SET lock_clear"),ext_set_data_height()}function DRM_help(e){if(e){e=w3_text("w3-medium w3-bold w3-text-aqua","Digital Radio Mondiale (DRM30) decoder help")+w3_div("w3-margin-T-8 w3-scroll-y|height:90%",w3_div("w3-margin-R-8",'Schedule in top panel: Click on green/pink bars to tune a station. <br>Use menu to sort schedule by service, time or frequency. <br>Gray vertical lines are spaced 1 hour apart beginning at 00:00 UTC on the left. <br>Red line shows current UTC time and updates while the extension is running. <br><span class="w3-text-yellow-highlight">New</span> A database menu allows selection of the source of schedule information. <br><br>With DRM selective fading can prevent even the strongest signals from being received properly. To see if signal fading is occurring adjust the waterfall "WF max/min" controls carefully so the waterfall colors are not saturated. The image below shows fading (dark areas) that might cause problems. See the <a href="http://forum.kiwisdr.com/discussion/1842/v1-360-drm-extension-now-available/p1" target="_blank">Kiwi forum</a> for more information. <br><br><img src="gfx/DRM.sel.fade.png" /><br><br>Custom passbands set before invoking the DRM extension will be respected. <br>For example the passband field of a DX label that has mode DRM, or a passband specification in the URL e.g. "my_kiwi.com:8073/?pb=0,5k&ext=drm" <hr>DRM code from <b>Dream 2.2.1</b> <br>Technische Universitaet Darmstadt, Institut fuer Nachrichtentechnik <br>Copyright (c) 2001-2020 &nbsp;&nbsp;&nbsp;&nbsp;<a href="https://sourceforge.net/projects/drm" target="_blank">sourceforge.net/projects/drm</a> <br>License: GNU General Public License version 2.0 (GPLv2) <br><hr><b>Fraunhofer FDK AAC Codec Library for Android</b> <br>© Copyright  1995 - 2018 Fraunhofer-Gesellschaft zur Förderung der angewandten <br>Forschung e.V. All rights reserved. <br>For more information visit <a href="http://www.iis.fraunhofer.de/amm" target="_blank">www.iis.fraunhofer.de/amm</a> <br><hr><b>OpenCORE-AMR modifications to Fraunhofer FDK AAC Codec</b> <br>Copyright (C) 2009-2011 Martin Storsjo &nbsp;&nbsp;&nbsp;&nbsp;<a href="https://sourceforge.net/projects/opencore-amr" target="_blank">sourceforge.net/projects/opencore-amr</a> <br>License: Apache License V2.0 <br><hr>Features <b>NewsService Journaline&reg;</b> decoder technology by <br>Fraunhofer IIS, Erlangen, Germany. <br>Copyright (c) 2003, 2004 <br>For more information visit <a href="http://www.iis.fhg.de/dab" target="_blank">www.iis.fhg.de/dab</a> <br>License: GNU General Public License version 2.0 (GPLv2) <br><hr>'));confirmation_show_content(e,610,350),w3_el("id-confirmation-container").style.height="100%"}else if(drm.mobile)return"off";return!0}function DRM_config_html(){var e=ext_get_cfg_param("DRM.nreg_chans",3);-1==e&&(e=3),drm.nreg_chans=Math.min(e,rx_chans-1);var r=Math.max(4,rx_chans);drm.nreg_chans_u={0:"none"};for(var d=1;d<r;d++)drm.nreg_chans_u[d]=d.toFixed(0);e=w3_inline_percent("w3-container",w3_div("w3-center",w3_select("w3-width-auto","Number of non-DRM connections allowed<br>when DRM in use","","DRM.nreg_chans",drm.nreg_chans,drm.nreg_chans_u,"admin_select_cb")),40)+w3_inline_percent("w3-container",w3_div("w3-margin-T-16 w3-restart",w3_input_get("","Test1 filename","DRM.test_file1","w3_string_set_cfg_cb","Kuwait.15110.1.12k.iq.au")),40)+w3_inline_percent("w3-container",w3_div("w3-margin-T-16 w3-restart",w3_input_get("","Test2 filename","DRM.test_file2","w3_string_set_cfg_cb","Delhi.828.1.12k.iq.au")),40);ext_config_html(drm,"DRM","DRM","DRM configuration",e)}



